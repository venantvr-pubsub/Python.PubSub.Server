/**
 * graph-common.css
 * Common styles shared across all graph visualizations
 * Professional styling with consistent colors and animations
 */

/* === Layout === */
body {
    overflow: hidden;
}

#activity-graph-container,
#activity-map {
    width: 100%;
    height: calc(100vh - 100px);
    position: relative;
}

#activity-graph-container {
    cursor: grab;
}

#activity-graph-container:active {
    cursor: grabbing;
}

/* === SVG Elements === */
#activity-svg,
#map-svg {
    width: 100%;
    height: 100%;
}

#map-svg {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
}

/* === Node Styles === */
.node circle {
    stroke: #ffffff;
    stroke-width: 2.5px;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* Node type colors */
.node.producer circle {
    fill: #007bff;
}

.node.topic circle {
    fill: #6c757d;
}

.node.consumer circle {
    fill: #dc3545;
}

/* Node text */
.node text {
    pointer-events: none;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 12px;
    font-weight: 500;
    fill: #f8f9fa;
    text-shadow:
        0 1px 2px rgba(0, 0, 0, 0.8),
        1px 0 2px rgba(0, 0, 0, 0.8),
        0 -1px 2px rgba(0, 0, 0, 0.8),
        -1px 0 2px rgba(0, 0, 0, 0.8);
}

/* === Link (Arrow) Styles === */
.link {
    fill: none;
    stroke-opacity: 0.8;
    stroke-width: 2.5px;
    stroke-linecap: round;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
}

.link.publish,
.message-arrow.publish {
    stroke: #28a745;
}

.link.consume,
.message-arrow.consume {
    stroke: #ffab40;
}

.link.consumed {
    stroke: #dc3545;
}

/* === Arrow Markers === */
marker path {
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.3));
}

/* === Connector Dots === */
.connector {
    fill: #ffffff;
    stroke: #282c34;
    stroke-width: 1.5px;
    r: 4;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.4));
}

/* === Animations === */

/* Blink effect for message activity */
@keyframes blink-effect {
    0% {
        fill: inherit;
        stroke: #ffffff;
        stroke-width: 2.5px;
    }
    50% {
        fill: #ffffff;
        stroke: #61dafb;
        stroke-width: 5px;
        filter: drop-shadow(0 0 8px rgba(97, 218, 251, 0.8));
    }
    100% {
        fill: inherit;
        stroke: #ffffff;
        stroke-width: 2.5px;
    }
}

.node.blink circle {
    animation: blink-effect 500ms ease-out;
}

/* Pulse effect for active links */
@keyframes pulse {
    0% {
        stroke-opacity: 1;
        stroke-width: 4px;
    }
    100% {
        stroke-opacity: 0.8;
        stroke-width: 2.5px;
    }
}

.link.active {
    animation: pulse 800ms ease-out;
}

/* Fade in animation for new nodes */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.node {
    animation: fadeIn 0.5s forwards;
}

/* Arrow animation for activity map */
@keyframes fadeInOut {
    0% {
        opacity: 0;
        stroke-width: 1px;
    }
    25% {
        opacity: 1;
        stroke-width: 2.5px;
    }
    75% {
        opacity: 1;
        stroke-width: 2.5px;
    }
    100% {
        opacity: 0;
        stroke-width: 1px;
    }
}

.message-arrow {
    stroke-width: 2.5px;
    stroke-linecap: round;
    animation: fadeInOut 1s ease-in-out;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
}

/* === Interaction States === */
.node circle:hover {
    stroke-width: 4px;
    filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.5));
    cursor: pointer;
}

.node.dragging circle {
    stroke-width: 4px;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.6));
}
